import requests
import json

API_URL = "http://127.0.0.1:8000/api/predict/"

# List of dam test data
DAMS = [
    {
        "projectName": "Ajwa Dam",
        "latitude": 22.4066,
        "longitude": 73.38,
        "purpose": "Irrigation",
        "river": "Surya",
        "nearestCity": "Waghoriya",
        "district": "Vadodara",
        "elevation": 66.0,
        "damType": "Earthen",
        "length": 4390.0,
        "maxHeight": 17.07,
        "slope": 3.6036,
        "seismicZone": "3",
        "mainSoilType": "Vertisols",
        "secondarySoilType": "Cambisols",
        "rainfall2020": 1197.1,
        "rainfall2021": 1131.9,
        "rainfall2022": 1055.2,
        "rainfall2023": 1143.2,
        "rainfall2024": 1606.7,
        "rainfall5YearAvg": 1226.82,
        "rainfallStdDev5yr": 218.31,
        "maxAnnualRainfall": 1606.7,
        "minAnnualRainfall": 1055.2,
        "avgTemperature5yr": 27.19,
        "maxTemperatureLast5yr": 39.26,
        "temperatureStdDev5yr": 5.01,
        "heatwaveDaysPerYear": 0,
        "ensoImpactIndex": 0.0,
        "climateVulnerabilityIndex": 0.177,
        "ndvi2025": 0.88,
        "riverFlowRate": 31.30,
        "riverDistance": 0.0,
    },
    {
        "projectName": "Bhadar(S) Dam",
        "latitude": 21.8255,
        "longitude": 70.7688,
        "purpose": "Irrigation",
        "river": "Bhadar",
        "nearestCity": "Gondal",
        "district": "Rajkot",
        "elevation": 105.0,
        "damType": "Earthen / Gravity & Masonry",
        "length": 4429.0,
        "maxHeight": 29.26,
        "slope": 0.0,
        "seismicZone": "3",
        "mainSoilType": "Unknown",
        "secondarySoilType": "Unknown",
        "rainfall2020": 1294.3,
        "rainfall2021": 996.6,
        "rainfall2022": 766.5,
        "rainfall2023": 778.6,
        "rainfall2024": 1510.4,
        "rainfall5YearAvg": 1069.28,
        "rainfallStdDev5yr": 326.6,
        "maxAnnualRainfall": 1510.4,
        "minAnnualRainfall": 766.5,
        "avgTemperature5yr": 26.33,
        "maxTemperatureLast5yr": 36.25,
        "temperatureStdDev5yr": 4.5,
        "heatwaveDaysPerYear": 0,
        "ensoImpactIndex": 0.0,
        "climateVulnerabilityIndex": 0.305,
        "ndvi2025": 0.13,
        "riverFlowRate": 222.73,
        "riverDistance": 0.0001,
    },
    {
        "projectName": "Demali Dam",
        "latitude": 22.95,
        "longitude": 73.6344,
        "purpose": "Irrigation",
        "river": "Kotar",
        "nearestCity": "Shehera",
        "district": "Panch Mahals",
        "elevation": 129.0,
        "damType": "Earthen",
        "length": 760.0,
        "maxHeight": 13.12,
        "slope": 0.9009,
        "seismicZone": "3",
        "mainSoilType": "Vertisols",
        "secondarySoilType": "Cambisols",
        "rainfall2020": 1414.5,
        "rainfall2021": 1160.4,
        "rainfall2022": 921.7,
        "rainfall2023": 1229.6,
        "rainfall2024": 1388.3,
        "rainfall5YearAvg": 1222.9,
        "rainfallStdDev5yr": 199.2,
        "maxAnnualRainfall": 1414.5,
        "minAnnualRainfall": 921.7,
        "avgTemperature5yr": 26.66,
        "maxTemperatureLast5yr": 39.1,
        "temperatureStdDev5yr": 5.0,
        "heatwaveDaysPerYear": 0,
        "ensoImpactIndex": 0.0,
        "climateVulnerabilityIndex": 0.163,
        "ndvi2025": 0.81,
        "riverFlowRate": 40.07,
        "riverDistance": 0.0002,
    },
    {
        "projectName": "Fulzar II Dam",
        "latitude": 22.2383,
        "longitude": 69.8102,
        "purpose": "Irrigation",
        "river": "Fulzar",
        "nearestCity": "Lalpur",
        "district": "Jamnagar",
        "elevation": 47.0,
        "damType": "Earthen / Gravity & Masonry",
        "length": 1660.0,
        "maxHeight": 17.07,
        "slope": 1.8018,
        "seismicZone": "4",
        "mainSoilType": "Vertisols",
        "secondarySoilType": "Cambisols",
        "rainfall2020": 1133.6,
        "rainfall2021": 1174.8,
        "rainfall2022": 763.3,
        "rainfall2023": 718.0,
        "rainfall2024": 1258.6,
        "rainfall5YearAvg": 1009.66,
        "rainfallStdDev5yr": 250.1,
        "maxAnnualRainfall": 1258.6,
        "minAnnualRainfall": 718.0,
        "avgTemperature5yr": 26.4,
        "maxTemperatureLast5yr": 36.03,
        "temperatureStdDev5yr": 4.24,
        "heatwaveDaysPerYear": 0,
        "ensoImpactIndex": 0.0,
        "climateVulnerabilityIndex": 0.248,
        "ndvi2025": 0.101,
        "riverFlowRate": 309.78,
        "riverDistance": 0.0,
    },
    {
        "projectName": "Jadsa Dam",
        "latitude": 23.4536,
        "longitude": 70.4311,
        "purpose": "Irrigation",
        "river": "Local River",
        "nearestCity": "Bhachau",
        "district": "Kachchh",
        "elevation": 84.0,
        "damType": "Earthen",
        "length": 358.0,
        "maxHeight": 17.0,
        "slope": 0.9009,
        "seismicZone": "5",
        "mainSoilType": "Vertisols",
        "secondarySoilType": "Luvisols",
        "rainfall2020": 770.0,
        "rainfall2021": 629.1,
        "rainfall2022": 740.7,
        "rainfall2023": 699.3,
        "rainfall2024": 672.4,
        "rainfall5YearAvg": 702.3,
        "rainfallStdDev5yr": 55.49,
        "maxAnnualRainfall": 770.0,
        "minAnnualRainfall": 629.1,
        "avgTemperature5yr": 27.12,
        "maxTemperatureLast5yr": 37.52,
        "temperatureStdDev5yr": 5.29,
        "heatwaveDaysPerYear": 0,
        "ensoImpactIndex": 0.0,
        "climateVulnerabilityIndex": 0.079,
        "ndvi2025": 0.023,
        "riverFlowRate": 279.57,
        "riverDistance": 0.0001,
    },
    {
        "projectName": "Kankavati Dam",
        "latitude": 23.0905,
        "longitude": 71.2872,
        "purpose": "Irrigation",
        "river": "Godra",
        "nearestCity": "Halvad",
        "district": "Surendranagar",
        "elevation": 19.0,
        "damType": "Earthen",
        "length": 2982.0,
        "maxHeight": 14.0,
        "slope": 0.0,
        "seismicZone": "4",
        "mainSoilType": "Luvisols",
        "secondarySoilType": "Vertisols",
        "rainfall2020": 1483.9,
        "rainfall2021": 912.9,
        "rainfall2022": 788.7,
        "rainfall2023": 780.3,
        "rainfall2024": 910.1,
        "rainfall5YearAvg": 975.18,
        "rainfallStdDev5yr": 291.4,
        "maxAnnualRainfall": 1483.9,
        "minAnnualRainfall": 780.3,
        "avgTemperature5yr": 27.13,
        "maxTemperatureLast5yr": 38.28,
        "temperatureStdDev5yr": 5.21,
        "heatwaveDaysPerYear": 0,
        "ensoImpactIndex": 0.0,
        "climateVulnerabilityIndex": 0.299,
        "ndvi2025": 0.118,
        "riverFlowRate": 197.21,
        "riverDistance": 0.0,
    },
    {
        "projectName": "LilpurI Dam",
        "latitude": 23.2341,
        "longitude": 70.0211,
        "purpose": "Irrigation",
        "river": "Lilpur",
        "nearestCity": "Rapar",
        "district": "Kachchh",
        "elevation": 74.0,
        "damType": "Earthen",
        "length": 472.0,
        "maxHeight": 16.78,
        "slope": 0.0,
        "seismicZone": "5",
        "mainSoilType": "Vertisols",
        "secondarySoilType": "Arenosols",
        "rainfall2020": 631.5,
        "rainfall2021": 601.0,
        "rainfall2022": 859.1,
        "rainfall2023": 621.9,
        "rainfall2024": 899.3,
        "rainfall5YearAvg": 722.56,
        "rainfallStdDev5yr": 144.1,
        "maxAnnualRainfall": 899.3,
        "minAnnualRainfall": 601.0,
        "avgTemperature5yr": 26.5,
        "maxTemperatureLast5yr": 35.3,
        "temperatureStdDev5yr": 4.65,
        "heatwaveDaysPerYear": 0,
        "ensoImpactIndex": 0.0,
        "climateVulnerabilityIndex": 0.199,
        "ndvi2025": 0.059,
        "riverFlowRate": 254.0,
        "riverDistance": 0.0001,
    },
]


def test_prediction(dam):
    try:
        response = requests.post(API_URL, json=dam)
        result = response.json()
        return result
    except Exception as e:
        return {"error": str(e)}


if __name__ == "__main__":
    for dam in DAMS:
        print(f"\n=== Testing {dam['projectName']} ===")
        output = test_prediction(dam)
        print(json.dumps(output, indent=2))
